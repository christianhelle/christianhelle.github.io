---
layout: post
title: Querying Overridden Check-in Policies
date: '2007-06-04T17:54:00.000+02:00'
author: Christian Resma Helle
tags:
- TFS
modified_time: '2007-06-05T15:48:36.967+02:00'
blogger_id: tag:blogger.com,1999:blog-4995334164049002857.post-3366694715429493200
blogger_orig_url: https://christian-helle.blogspot.com/2007/06/querying-overridden-check-in-policies.html
---

In the Team Foundation Server, you can enable certain policies for checking in files. The default install will contain policies that can verify that the check-in is associated with a work item, or that unit tests were created for the changes made, etc etc. But even though certain rules were made for checking in, the user is still given the possibility to override these policies, if the user decides to override the policy then the user is prompted with a dialog, where the user can input their "reason" for ignoring such policies. This action is logged to the TFS databases.<br /><br />In this article I will show you how to query the database "TfsVersionControl" and "TfsWarehouse" to get more information for the overridden check-in policy.<br /><br />let's start off with openning a query to the database server that TFS uses then type in the following query:<br /><br /><span style="color: rgb(51, 51, 255);font-family:courier new;" >SELECT</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: rgb(255, 0, 0);font-family:courier new;" >'Changeset ID'</span><span style="font-family:courier new;">=p.ChangeSetId,</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: rgb(255, 0, 0);font-family:courier new;" >'Creation Date'</span><span style="font-family:courier new;">=cs.CreationDate,</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: rgb(255, 0, 0);font-family:courier new;" >'Check-in Comment'</span><span style="font-family:courier new;">=cs.Comment,</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: rgb(255, 0, 0);font-family:courier new;" >'Override Reason'</span><span style="font-family:courier new;">=p.Comment,</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: rgb(255, 0, 0);font-family:courier new;" >'Owner'</span><span style="font-family:courier new;">=pr.Person,</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: rgb(255, 0, 0);font-family:courier new;" >'Email'</span><span style="font-family:courier new;">=pr.Email</span><br /><span style="color: rgb(51, 51, 255);font-family:courier new;" >FROM</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;TfsVersionControl..tbl_PolicyOverride p</span><br /><span style="color: rgb(153, 153, 153);font-family:courier new;" >INNER JOIN </span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;TfsVersionControl..tbl_ChangeSet cs </span><span style="color: rgb(51, 51, 255);font-family:courier new;" >ON </span><span style="font-family:courier new;">p.ChangeSetId=cs.ChangeSetId</span><br /><span style="color: rgb(153, 153, 153);font-family:courier new;" >INNER JOIN</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;TfsVersionControl..tbl_Identity i </span><span style="color: rgb(51, 51, 255);font-family:courier new;" >ON </span><span style="font-family:courier new;">cs.OwnerId=i.IdentityId</span><br /><span style="color: rgb(153, 153, 153);font-family:courier new;" >INNER JOIN</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;TfsWarehouse..Person pr </span><span style="color: rgb(51, 51, 255);font-family:courier new;" >ON </span><span style="font-family:courier new;">i.DisplayName=(pr.Domain+<span style="color: rgb(255, 0, 0);">'\'</span>+pr.Alias)</span><br /><span style="color: rgb(51, 51, 255);font-family:courier new;" >ORDER BY</span><br /><span style="font-family:courier new;">&nbsp;&nbsp;&nbsp;&nbsp;cs.ChangeSetId </span><span style="color: rgb(51, 51, 255);font-family:courier new;" >DESC</span><br /><br />This query will provide you with the change set number, date, check-in comment, override reason, change set owner and email address for every overridden check-in policy.