---
layout: post
title: Generate iOS InfoPlist.strings Translations from Google Sheets
date: '2019-06-18T23:21:00.001+02:00'
# author: Christian Helle
tags:
- iOS
- Localization
- Xamarin
modified_time: '2019-06-20T16:55:49.393+02:00'
thumbnail: https://1.bp.blogspot.com/-b3CPRXAItU4/XQlNzCtdiaI/AAAAAAAAQVw/QGee8D4WHkMt4QxvvJGqAKRG0BPUxgktQCLcBGAs/s72-c/infoplist-google-sheets.png
blogger_id: tag:blogger.com,1999:blog-4995334164049002857.post-6206453854170211664
blogger_orig_url: https://christian-helle.blogspot.com/2019/06/generate-ios-infopliststrings.html
---

In my previous article&nbsp;<a href="/2019/06/generate-resx-translations-using-google.html">Generating ResX translations from Google Sheets</a>, I wrote about using Google Sheets as a translation tool by using the <a href="https://support.google.com/docs/answer/3093331?hl=en">GOOGLETRANSLATE</a>&nbsp;built in function to generate translation files for a <b>Xamarin.Forms</b> solution. For this post, I will demonstrate something very similar, but instead of ResX files I'll generate <b>InfoPlist.strings</b> files in iOS for localizing the permission request prompts for accessing things like Camera, Location, Photo Gallery, etc. For the sake of this article I created&nbsp;<a href="https://docs.google.com/spreadsheets/d/125id155PUq-6Odwg8Nf9fmkgBsKahTGbJYaYBD2rpSg">this sample Google Sheets</a><br /><br />For a quick recap, we will use a tool called <a href="https://github.com/rickykaare/csvtrans">csvtrans</a>&nbsp;written by my colleague and good friend, <a href="https://twitter.com/rickykaare">Ricky Kaare Engelharth</a>. The tool is built with .NET Core and can be installed using this command<br /><pre><code><br /><b>dotnet tool install -g csvtrans</b><br /></code><br /></pre>Using the tool is also straight forward and it also comes with some quick start instructions<br /><pre><code><br /><b>USAGE: csvtrans [--help] [--sheet &lt;document id&gt; &lt;sheet name&gt;]<br />                [--csv &lt;url or path&gt;] [--format &lt;apple|android|resx&gt;]<br />                [--outputdir &lt;directory path&gt;] [--name &lt;string&gt;]<br />                [--convert-placeholders &lt;regex pattern&gt;]<br /><br />OPTIONS:<br /><br />    --sheet, -s &lt;document id&gt; &lt;sheet name&gt;<br />                          specify a Google Sheet as input.<br />    --csv, -c &lt;url or path&gt;<br />                          specify a online or local cvs file as input.<br />    --format, -f &lt;apple|android|resx&gt;<br />                          specify the output format.<br />    --outputdir, -o &lt;directory path&gt;<br />                          specify the output directory.<br />    --name, -n &lt;string&gt;   specify an optional name for the output.<br />    --convert-placeholders, -p &lt;regex pattern&gt;<br />                          convert placeholders to match the output format.<br />    --help                display this list of options.</b><br /></code></pre><br />Here’s an example usage of the tool<br /><pre><code><br /><b>csvtrans --sheet 125id155PUq-6Odwg8Nf9fmkgBsKahTGbJYaYBD2rpSg iOS --format apple --outputdir .\Resources --name InfoPlist</b><br /></code></pre><br />The first argument <code><b>–-sheet</b></code> is the Google Sheet document ID followed by the Sheet Name, the next argument <code><b>–-format</b></code> specifies the output file format, the argument <code><b>–-outputdir</b></code> specifies the output folder, and the last argument <code><b>--name</b></code> specifies the output filename.<br /><br />You can get the Document ID from the URL of the Google Sheet<br /><br /><img src="https://1.bp.blogspot.com/-b3CPRXAItU4/XQlNzCtdiaI/AAAAAAAAQVw/QGee8D4WHkMt4QxvvJGqAKRG0BPUxgktQCLcBGAs/s1600/infoplist-google-sheets.png" /><br /><br />Here's an example output <br /><br /><img src="https://1.bp.blogspot.com/-MYI8NQ-MMxI/XQlRaBc15kI/AAAAAAAAQWI/12li-SC01DcHe-FJmdKzxiWUrF640LgGwCLcBGAs/s1600/infoplist-console.png" /><br /><br />Now I can just bring these files into my project and use them directly. Well, almost! There's one little problem, and that is that by default the <b>Xamarin.iOS</b> csproj tooling explicitly adds each <b>InfoPlist.strings</b> file as a <b>BundleResource</b>. Oddly enough, the csproj format allows to specify wild card folders, so if we want to enable dynamic generation of InfoPlist.strings translations then we need to manually edit the csproj.  <br /><br />This is actually very easy to do. We just need to replace the lines like <br /><br /><img src="https://1.bp.blogspot.com/-Cwkov_0wjD0/XQlToKME16I/AAAAAAAAQWU/kOJ1iKtUefkI7tItJFuQGA4tCsD_zVazQCLcBGAs/s1600/csproj-before.png" /><br /><br />with  <br /><br /><img src="https://1.bp.blogspot.com/-d18J3MDYoWY/XQlTrunBiiI/AAAAAAAAQWY/MwQVkLiOmmc46EsiE-Qji46mDR_omS0ogCLcBGAs/s1600/csproj-after.png" /><br /><br />This opens up for dynamic translations at build time using your CI/CD build tools of choice<br /><br />