---
layout: post
title: Multi-platform Mobile Development - Sending SMS
date: '2011-01-20T16:28:00.000+01:00'
# author: Christian Resma Helle
tags:
- Multi-platform Mobile Development
- Windows Phone 7
- Android
- Windows Mobile
- ".NET Compact Framework"
modified_time: '2011-01-20T16:28:14.655+01:00'
blogger_id: tag:blogger.com,1999:blog-4995334164049002857.post-2178191598738103131
blogger_orig_url: https://christian-helle.blogspot.com/2011/01/multi-platform-mobile-development_20.html
---

This is a task that pretty much every mobile device can do, or at least any mobile phone can do. In this short post on multi-platform mobile development I would like to demonstrate how to send an SMS or launch the SMS compose window in a mobile application.  <br /><br />I'm going to demonstrate how to use the messaging API's of the following platforms:  <ul><li>Android</li><li>Windows Phone 7</li><li>Windows Mobile 5.0 (and higher) using .NET Compact Framework</li><li>Windows Mobile using the Platform SDK (Native code)</li></ul> <br /><b>Android</b> <br /><br />There are 2 ways of sending SMS from an Android application: Launching the Compose SMS window; Through the SmsManager API. I figured that since this article is supposed to demonstrate as many ways as possible for sending SMS that I create a helper class containing methods that I think would be useful or at least convenient to have.  <br /><br />Here's a SMS helper class for Android that I hope you would find useful.  <br /><br /><div style="font-family: Courier New; font-size: 10pt; color: black; background: white;"><?xml version="1.0" encoding="UTF-8"?><java><style>td.java, td.java-ln {vertical-align:top;} tt.java, tt.java-ln, pre.java, pre.java-ln {line-height:1em; margin-bottom:0em;} td.java-ln { text-align:right; } tt.java-ln, pre.java-ln { color:#888888 } /* Background       */ span.java0  { font-size: 10pt; color:#ffffff; } /* Line numbers       */ span.java1  { font-size: 10pt; color:#808080; } /* Multi-line comments       */ span.java2  { font-size: 10pt; color:#3f7f5f; } /* Single-line comments       */ span.java3  { font-size: 10pt; color:#3f7f5f; } /* Keywords       */ span.java4  { font-size: 10pt; color:#7f0055; font-weight:bold; } /* Strings       */ span.java5  { font-size: 10pt; color:#2a00ff; } /* Character constants       */ span.java6  { font-size: 10pt; color:#990000; } /* Numeric constants       */ span.java7  { font-size: 10pt; color:#990000; } /* Parenthesis       */ span.java8  { font-size: 10pt; color:#000000; } /* Primitive Types       */ span.java9  { font-size: 10pt; color:#7f0055; font-weight:bold; } /* Others       */ span.java10  { font-size: 10pt; color:#000000; } /* Javadoc keywords       */ span.java11  { font-size: 10pt; color:#7f9fbf; } /* Javadoc HTML tags       */ span.java12  { font-size: 10pt; color:#7f7f9f; } /* Javadoc links       */ span.java13  { font-size: 10pt; color:#3f3fbf; } /* Javadoc others       */ span.java14  { font-size: 10pt; color:#3f5fbf; } /* Undefined       */ span.java15  { font-size: 10pt; color:#ff6100; } /* Annotation       */ span.java16  { font-size: 10pt; color:#646464; } </style><source><span class="java4">package </span><span class="java10">com.christianhelle.android.samples;<br /><br /></span><span class="java4">import </span><span class="java10">android.app.Activity;<br /></span><span class="java4">import </span><span class="java10">android.app.PendingIntent;<br /></span><span class="java4">import </span><span class="java10">android.content.BroadcastReceiver;<br /></span><span class="java4">import </span><span class="java10">android.content.Context;<br /></span><span class="java4">import </span><span class="java10">android.content.Intent;<br /></span><span class="java4">import </span><span class="java10">android.content.IntentFilter;<br /></span><span class="java4">import </span><span class="java10">android.net.Uri;<br /></span><span class="java4">import </span><span class="java10">android.telephony.SmsManager;<br /></span><span class="java4">import </span><span class="java10">android.widget.Toast;<br /><br /></span><span class="java14">/**<br /> * Helper class for sending SMS messages<br /> * <br /> * </span><span class="java11">@author </span><span class="java14">Christian Resma Helle<br /> */<br /></span><span class="java4">public class </span><span class="java10">Sms </span><span class="java8">{<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">private final static </span><span class="java10">String SENT_ACTION = </span><span class="java5">&#34;SENT&#34;</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">private final static </span><span class="java10">String DELIVERED_ACTION = </span><span class="java5">&#34;DELIVERED&#34;</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">private </span><span class="java10">Context context;<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">private </span><span class="java10">PendingIntent sentIntent;<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">private </span><span class="java10">PendingIntent deliveredIntent;<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java14">/**<br />&#xA0;&#xA0;&#xA0;&#xA0; * Creates an instance of the SMS class<br />&#xA0;&#xA0;&#xA0;&#xA0; * <br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">context&#xA0;&#xA0;&#xA0;&#xA0; Context that owns displayed notifications<br />&#xA0;&#xA0;&#xA0;&#xA0; */<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java10">Sms</span><span class="java8">(</span><span class="java10">Context context</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">this</span><span class="java10">.context = context;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; registerForNotification</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java4">private </span><span class="java9">void </span><span class="java10">registerForNotification</span><span class="java8">() {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">sentIntent = PendingIntent.getBroadcast</span><span class="java8">(</span><span class="java10">context, </span><span class="java7">0</span><span class="java10">, </span><span class="java4">new </span><span class="java10">Intent</span><span class="java8">(</span><span class="java10">SENT_ACTION</span><span class="java8">)</span><span class="java10">, </span><span class="java7">0</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; deliveredIntent = PendingIntent.getBroadcast</span><span class="java8">(</span><span class="java10">context, </span><span class="java7">0</span><span class="java10">, </span><span class="java4">new </span><span class="java10">Intent</span><span class="java8">(</span><span class="java10">DELIVERED_ACTION</span><span class="java8">)</span><span class="java10">, </span><span class="java7">0</span><span class="java8">)</span><span class="java10">;<br /><br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; context.registerReceiver</span><span class="java8">(</span><span class="java10">messageSentReceiver, </span><span class="java4">new </span><span class="java10">IntentFilter</span><span class="java8">(</span><span class="java10">SENT_ACTION</span><span class="java8">))</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; context.registerReceiver</span><span class="java8">(</span><span class="java10">messageDeliveredReceiver, </span><span class="java4">new </span><span class="java10">IntentFilter</span><span class="java8">(</span><span class="java10">DELIVERED_ACTION</span><span class="java8">))</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br />&#xA0;&#xA0;&#xA0;&#xA0; <br />&#xA0;&#xA0;&#xA0; </span><span class="java4">protected </span><span class="java9">void </span><span class="java10">finalize</span><span class="java8">() </span><span class="java4">throws </span><span class="java10">Throwable </span><span class="java8">{<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">context.unregisterReceiver</span><span class="java8">(</span><span class="java10">messageSentReceiver</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; context.unregisterReceiver</span><span class="java8">(</span><span class="java10">messageDeliveredReceiver</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java14">/**<br />&#xA0;&#xA0;&#xA0;&#xA0; * Opens the Compose SMS application with the recipient phone number displayed<br />&#xA0;&#xA0;&#xA0;&#xA0; * <br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">phoneNumber&#xA0;&#xA0;&#xA0;&#xA0; recipient phone number of the SMS<br />&#xA0;&#xA0;&#xA0;&#xA0; */<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">composeMessage</span><span class="java8">(</span><span class="java10">String phoneNumber</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">Intent intent = </span><span class="java4">new </span><span class="java10">Intent</span><span class="java8">(</span><span class="java10">Intent.ACTION_VIEW, Uri.parse</span><span class="java8">(</span><span class="java5">&#34;sms:&#34; </span><span class="java10">+ phoneNumber</span><span class="java8">))</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; context.startActivity</span><span class="java8">(</span><span class="java10">intent</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java14">/**<br />&#xA0;&#xA0;&#xA0;&#xA0; * Opens the Compose SMS application with the recipient phone number and message displayed<br />&#xA0;&#xA0;&#xA0;&#xA0; * <br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">phoneNumber&#xA0;&#xA0;&#xA0;&#xA0; recipient phone number of the SMS<br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">text&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; message body<br />&#xA0;&#xA0;&#xA0;&#xA0; */<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">composeMessage</span><span class="java8">(</span><span class="java10">String phoneNumber, String text</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">Intent intent = </span><span class="java4">new </span><span class="java10">Intent</span><span class="java8">(</span><span class="java10">Intent.ACTION_VIEW</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; intent.putExtra</span><span class="java8">(</span><span class="java5">&#34;sms_body&#34;</span><span class="java10">, text</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; intent.putExtra</span><span class="java8">(</span><span class="java5">&#34;address&#34;</span><span class="java10">, phoneNumber</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; intent.setType</span><span class="java8">(</span><span class="java5">&#34;vnd.android-dir/mms-sms&#34;</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; context.startActivity</span><span class="java8">(</span><span class="java10">intent</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java14">/**<br />&#xA0;&#xA0;&#xA0;&#xA0; * Opens the Compose SMS application with the multiple recipient phone numbers and the message displayed<br />&#xA0;&#xA0;&#xA0;&#xA0; * <br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">phoneNumber&#xA0;&#xA0;&#xA0;&#xA0; recipient phone numbers of the SMS<br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">text&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; message body<br />&#xA0;&#xA0;&#xA0;&#xA0; */<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">composeMessage</span><span class="java8">(</span><span class="java10">String</span><span class="java8">[] </span><span class="java10">phoneNumbers, String text</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">StringBuilder sb = </span><span class="java4">new </span><span class="java10">StringBuilder</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">for </span><span class="java8">(</span><span class="java10">String string : phoneNumbers</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">sb.append</span><span class="java8">(</span><span class="java10">string</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; sb.append</span><span class="java8">(</span><span class="java5">&#34;;&#34;</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">composeMessage</span><span class="java8">(</span><span class="java10">sb.toString</span><span class="java8">()</span><span class="java10">, text</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java14">/**<br />&#xA0;&#xA0;&#xA0;&#xA0; * Send an SMS to the specified number<br />&#xA0;&#xA0;&#xA0;&#xA0; * <br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">phoneNumber&#xA0;&#xA0;&#xA0;&#xA0; recipient phone number of the SMS<br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">text&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; message body<br />&#xA0;&#xA0;&#xA0;&#xA0; */<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">sendMessage</span><span class="java8">(</span><span class="java10">String phoneNumber, String text</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">sendMessage</span><span class="java8">(</span><span class="java10">phoneNumber, text, </span><span class="java4">false</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java14">/**<br />&#xA0;&#xA0;&#xA0;&#xA0; * Send an SMS to the specified number and display a notification on the message status<br />&#xA0;&#xA0;&#xA0;&#xA0; * if the notifyStatus parameter is set to </span><span class="java12">&lt;b&gt;</span><span class="java14">true</span><span class="java12">&lt;/b&gt;<br />&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java14">* <br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">phoneNumber&#xA0;&#xA0;&#xA0;&#xA0; recipient phone number of the SMS<br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">text&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; message body<br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">notifyStatus&#xA0;&#xA0;&#xA0;&#xA0; set to </span><span class="java12">&lt;b&gt;</span><span class="java14">true</span><span class="java12">&lt;/b&gt; </span><span class="java14">to display a notification on the screen <br />&#xA0;&#xA0;&#xA0;&#xA0; *&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if the message was sent and delivered properly, otherwise </span><span class="java12">&lt;b&gt;</span><span class="java14">false</span><span class="java12">&lt;/b&gt;<br />&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java14">*/<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">sendMessage</span><span class="java8">(</span><span class="java10">String phoneNumber, String text, </span><span class="java9">boolean </span><span class="java10">notifyStatus</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">SmsManager sms = SmsManager.getDefault</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">if </span><span class="java8">(</span><span class="java10">notifyStatus</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">sms.sendTextMessage</span><span class="java8">(</span><span class="java10">phoneNumber, null, text, sentIntent, deliveredIntent</span><span class="java8">)</span><span class="java10">;&#xA0;&#xA0;&#xA0; <br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java8">} </span><span class="java4">else </span><span class="java8">{<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">sms.sendTextMessage</span><span class="java8">(</span><span class="java10">phoneNumber, null, text, null, </span><span class="java4">null</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java8">}&#xA0;&#xA0;&#xA0; <br />&#xA0;&#xA0;&#xA0; }<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java14">/**<br />&#xA0;&#xA0;&#xA0;&#xA0; * Send an SMS to multiple recipients and display<br />&#xA0;&#xA0;&#xA0;&#xA0; * <br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">phoneNumber&#xA0;&#xA0;&#xA0;&#xA0; recipient phone number of the SMS<br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">text&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; message body<br />&#xA0;&#xA0;&#xA0;&#xA0; */<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">sendMessage</span><span class="java8">(</span><span class="java10">String</span><span class="java8">[] </span><span class="java10">phoneNumbers, String text</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">sendMessage</span><span class="java8">(</span><span class="java10">phoneNumbers, text, </span><span class="java4">false</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java14">/**<br />&#xA0;&#xA0;&#xA0;&#xA0; * Send an SMS to multiple recipients and display a notification <br />&#xA0;&#xA0;&#xA0;&#xA0; * on the message status if notifyStatus is set to </span><span class="java12">&lt;b&gt;</span><span class="java14">true</span><span class="java12">&lt;/b&gt;<br />&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java14">* <br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">phoneNumber&#xA0;&#xA0;&#xA0;&#xA0; recipient phone number of the SMS<br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">text&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; message body<br />&#xA0;&#xA0;&#xA0;&#xA0; * </span><span class="java11">@param </span><span class="java14">notifyStatus&#xA0;&#xA0;&#xA0;&#xA0; set to </span><span class="java12">&lt;b&gt;</span><span class="java14">true</span><span class="java12">&lt;/b&gt; </span><span class="java14">to display a notification on the screen <br />&#xA0;&#xA0;&#xA0;&#xA0; *&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if the message was sent and delivered properly, otherwise </span><span class="java12">&lt;b&gt;</span><span class="java14">false</span><span class="java12">&lt;/b&gt;<br />&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java14">*/<br />&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">sendMessage</span><span class="java8">(</span><span class="java10">String</span><span class="java8">[] </span><span class="java10">phoneNumbers, String text, </span><span class="java9">boolean </span><span class="java10">notifyStatus</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">StringBuilder sb = </span><span class="java4">new </span><span class="java10">StringBuilder</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">for </span><span class="java8">(</span><span class="java10">String string : phoneNumbers</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">sb.append</span><span class="java8">(</span><span class="java10">string</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; sb.append</span><span class="java8">(</span><span class="java5">&#34;;&#34;</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">sendMessage</span><span class="java8">(</span><span class="java10">sb.toString</span><span class="java8">()</span><span class="java10">, text, notifyStatus</span><span class="java8">)</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java4">private </span><span class="java10">BroadcastReceiver messageSentReceiver = </span><span class="java4">new </span><span class="java10">BroadcastReceiver</span><span class="java8">() {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java16">@Override<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">onReceive</span><span class="java8">(</span><span class="java10">Context context, Intent intent</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">switch </span><span class="java8">(</span><span class="java10">getResultCode</span><span class="java8">()) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">case </span><span class="java10">Activity.RESULT_OK:<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Toast.makeText</span><span class="java8">(</span><span class="java10">context, </span><span class="java5">&#34;SMS sent&#34;</span><span class="java10">, Toast.LENGTH_SHORT</span><span class="java8">)</span><span class="java10">.show</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">break</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">case </span><span class="java10">SmsManager.RESULT_ERROR_GENERIC_FAILURE:<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Toast.makeText</span><span class="java8">(</span><span class="java10">context, </span><span class="java5">&#34;Generic failure&#34;</span><span class="java10">, Toast.LENGTH_SHORT</span><span class="java8">)</span><span class="java10">.show</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">break</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">case </span><span class="java10">SmsManager.RESULT_ERROR_NO_SERVICE:<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Toast.makeText</span><span class="java8">(</span><span class="java10">context, </span><span class="java5">&#34;No service&#34;</span><span class="java10">, Toast.LENGTH_SHORT</span><span class="java8">)</span><span class="java10">.show</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">break</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">case </span><span class="java10">SmsManager.RESULT_ERROR_NULL_PDU:<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Toast.makeText</span><span class="java8">(</span><span class="java10">context, </span><span class="java5">&#34;Null PDU&#34;</span><span class="java10">, Toast.LENGTH_SHORT</span><span class="java8">)</span><span class="java10">.show</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">break</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">case </span><span class="java10">SmsManager.RESULT_ERROR_RADIO_OFF:<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Toast.makeText</span><span class="java8">(</span><span class="java10">context, </span><span class="java5">&#34;Radio off&#34;</span><span class="java10">, Toast.LENGTH_SHORT</span><span class="java8">)</span><span class="java10">.show</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">break</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }<br />&#xA0;&#xA0;&#xA0; }</span><span class="java10">;<br /><br />&#xA0;&#xA0;&#xA0; </span><span class="java4">private </span><span class="java10">BroadcastReceiver messageDeliveredReceiver = </span><span class="java4">new </span><span class="java10">BroadcastReceiver</span><span class="java8">() {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java16">@Override<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">onReceive</span><span class="java8">(</span><span class="java10">Context context, Intent intent</span><span class="java8">) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">switch </span><span class="java8">(</span><span class="java10">getResultCode</span><span class="java8">()) {<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">case </span><span class="java10">Activity.RESULT_OK:<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Toast.makeText</span><span class="java8">(</span><span class="java10">context, </span><span class="java5">&#34;Message delivered&#34;</span><span class="java10">, Toast.LENGTH_SHORT</span><span class="java8">)</span><span class="java10">.show</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">break</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">case </span><span class="java10">Activity.RESULT_CANCELED:<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Toast.makeText</span><span class="java8">(</span><span class="java10">context, </span><span class="java5">&#34;Message not delivered&#34;</span><span class="java10">, Toast.LENGTH_SHORT</span><span class="java8">)</span><span class="java10">.show</span><span class="java8">()</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">break</span><span class="java10">;<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }<br />&#xA0;&#xA0;&#xA0; }</span><span class="java10">;<br /></span><span class="java8">}</span></source></java></div> <br /><br />Before your Android application can send SMS it needs the right permissions for it. Add the SEND_SMS permission your AndroidManifest.xml  <br /><br /><div style="font-family: Courier New; font-size: 10pt; color: black; background: white;"><pre style="margin: 0px;"><span style="color: blue;">&lt;</span><span style="color: #a31515;">uses-permission</span><span style="color: blue;"> </span><span style="color: red;">android:name</span><span style="color: blue;">=</span>&quot;<span style="color: blue;">android.permission.SEND_SMS</span>&quot;<span style="color: blue;">&gt;&lt;/</span><span style="color: #a31515;">uses-permission</span><span style="color: blue;">&gt;</span></pre></div> <br /><br />Here are some examples on how to use the SMS helper class defined above from within an Activity class:  <br /><br /><div style="font-family: Courier New; font-size: 10pt; color: black; background: white;"><?xml version="1.0" encoding="UTF-8"?><java><style>td.java, td.java-ln {vertical-align:top;} tt.java, tt.java-ln, pre.java, pre.java-ln {line-height:1em; margin-bottom:0em;} td.java-ln { text-align:right; } tt.java-ln, pre.java-ln { color:#888888 } /* Background       */ span.java0  { font-size: 10pt; color:#ffffff; } /* Line numbers       */ span.java1  { font-size: 10pt; color:#808080; } /* Multi-line comments       */ span.java2  { font-size: 10pt; color:#3f7f5f; } /* Single-line comments       */ span.java3  { font-size: 10pt; color:#3f7f5f; } /* Keywords       */ span.java4  { font-size: 10pt; color:#7f0055; font-weight:bold; } /* Strings       */ span.java5  { font-size: 10pt; color:#2a00ff; } /* Character constants       */ span.java6  { font-size: 10pt; color:#990000; } /* Numeric constants       */ span.java7  { font-size: 10pt; color:#990000; } /* Parenthesis       */ span.java8  { font-size: 10pt; color:#000000; } /* Primitive Types       */ span.java9  { font-size: 10pt; color:#7f0055; font-weight:bold; } /* Others       */ span.java10  { font-size: 10pt; color:#000000; } /* Javadoc keywords       */ span.java11  { font-size: 10pt; color:#7f9fbf; } /* Javadoc HTML tags       */ span.java12  { font-size: 10pt; color:#7f7f9f; } /* Javadoc links       */ span.java13  { font-size: 10pt; color:#3f3fbf; } /* Javadoc others       */ span.java14  { font-size: 10pt; color:#3f5fbf; } /* Undefined       */ span.java15  { font-size: 10pt; color:#ff6100; } /* Annotation       */ span.java16  { font-size: 10pt; color:#646464; } </style><source><span class="java10">Sms sms = </span><span class="java4">new </span><span class="java10">Sms</span><span class="java8">(</span><span class="java10">getApplicationContext</span><span class="java8">())</span><span class="java10">;<br /><br /></span><span class="java3">// Send an SMS to the specified number<br /></span><span class="java10">sms.sendMessage</span><span class="java8">(</span><span class="java5">&#34;+4512345678&#34;</span><span class="java10">, </span><span class="java5">&#34;Multi-platform Mobile Development&#34;</span><span class="java8">)</span><span class="java10">;<br /><br /></span><span class="java3">// Send an SMS to the specified number and display a notification on the message status<br /></span><span class="java10">sms.sendMessage</span><span class="java8">(</span><span class="java5">&#34;+4512345678&#34;</span><span class="java10">, </span><span class="java5">&#34;Multi-platform Mobile Development&#34;</span><span class="java10">, </span><span class="java4">true</span><span class="java8">)</span><span class="java10">;<br /><br /></span><span class="java3">// Send an SMS to multiple recipients<br /></span><span class="java10">sms.sendMessage</span><span class="java8">(</span><span class="java4">new </span><span class="java10">String</span><span class="java8">[] { </span><span class="java5">&#34;+4512345678&#34;</span><span class="java10">, </span><span class="java5">&#34;+4598765432&#34; </span><span class="java8">}</span><span class="java10">, </span><span class="java5">&#34;Multi-platform Mobile Development&#34;</span><span class="java8">)</span><span class="java10">;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <br /><br /></span><span class="java3">// Send an SMS to multiple recipients and display a notification on the message status<br /></span><span class="java10">sms.sendMessage</span><span class="java8">(</span><span class="java4">new </span><span class="java10">String</span><span class="java8">[] { </span><span class="java5">&#34;+4512345678&#34;</span><span class="java10">, </span><span class="java5">&#34;+4598765432&#34; </span><span class="java8">}</span><span class="java10">, </span><span class="java5">&#34;Multi-platform Mobile Development&#34;</span><span class="java10">, </span><span class="java4">true</span><span class="java8">)</span><span class="java10">;<br /><br /></span><span class="java3">// Opens the Compose SMS application with the recipient phone number displayed<br /></span><span class="java10">sms.composeMessage</span><span class="java8">(</span><span class="java5">&#34;+4512345678&#34;</span><span class="java8">)</span><span class="java10">;<br /><br /></span><span class="java3">// Opens the Compose SMS application with the recipient phone number and message displayed<br /></span><span class="java10">sms.composeMessage</span><span class="java8">(</span><span class="java5">&#34;+4512345678&#34;</span><span class="java10">, </span><span class="java5">&#34;Multi-platform Mobile Development&#34;</span><span class="java8">)</span><span class="java10">;<br /><br /></span><span class="java3">// Opens the Compose SMS application with the multiple recipient phone numbers and the message displayed<br /></span><span class="java10">sms.composeMessage</span><span class="java8">(</span><span class="java4">new </span><span class="java10">String</span><span class="java8">[] { </span><span class="java5">&#34;+4512345678&#34;</span><span class="java10">, </span><span class="java5">&#34;+4598765432&#34; </span><span class="java8">}</span><span class="java10">, </span><span class="java5">&#34;Multi-platform Mobile Development&#34;</span><span class="java8">)</span><span class="java10">;</span></source></java></div> <br /><br /><b>Windows Phone 7</b> <br /><br />This platform unfortunately doesn't provide as vast a API collection compared to Android and Windows Mobile. To send an SMS in Windows Phone 7, you will have to use the SMS Compose page in the built-in messaging application. To launch this we call the Show() method in SmsComposeTask.  <br /><br />Here's how to use SmsComposeTask  <br /><br /><div style="font-family: Courier New; font-size: 10pt; color: black; background: white;"><pre style="margin: 0px;"><span style="color: #2b91af;">SmsComposeTask</span> launcher = <span style="color: blue;">new</span> <span style="color: #2b91af;">SmsComposeTask</span>();</pre><pre style="margin: 0px;">launcher.To = <span style="color: #a31515;">&quot;+45 12 34 56 78&quot;</span>;</pre><pre style="margin: 0px;">launcher.Body = <span style="color: #a31515;">&quot;Multi-platform Mobile Development&quot;</span>;</pre><pre style="margin: 0px;">launcher.Show();</pre></div>  <br /><br /><b>Windows Mobile 5.0 (and higher) using .NET Compact Framework</b> <br /><br />Sending an SMS in this platform is just as easy as doing so in Windows Phone 7. Windows Mobile provides native API's for the Short Messaging System, these methods are exposed as C type methods in a DLL called sms.dll. Aside from the SMS API, the platform also offers another API called the Messaging API (CE MAPI) for sending SMS, MMS, and Emails. Microsoft has provided managed wrappers for these and many other API's to make the life of the managed code developer a lot easier.  <br /><br />To send an SMS in Windows Mobile 5.0 (and higher) we use the SmsMessage object. There are 2 ways of accomplishing this: Using the Send() method of the SmsMessage class; Sending the SMS using the Compose SMS application  <br /><br />Here's a snippet on how to send SMS using the Send() method  <br /><br /><div style="font-family: Courier New; font-size: 10pt; color: black; background: white;"><pre style="margin: 0px;"><span style="color: #2b91af;">SmsMessage</span> sms = <span style="color: blue;">new</span> <span style="color: #2b91af;">SmsMessage</span>(<span style="color: #a31515;">&quot;+45 12 34 56 78&quot;</span>, <span style="color: #a31515;">&quot;Multi-platform Mobile Development&quot;</span>);</pre><pre style="margin: 0px;">sms.Send();</pre></div> <br /><br />Here's a snippet on how to send SMS using the Compose SMS application  <br /><br /><div style="font-family: Courier New; font-size: 10pt; color: black; background: white;"><pre style="margin: 0px;"><span style="color: #2b91af;">SmsMessage</span> sms = <span style="color: blue;">new</span> <span style="color: #2b91af;">SmsMessage</span>(<span style="color: #a31515;">&quot;+45 12 34 56 78&quot;</span>, <span style="color: #a31515;">&quot;Multi-platform Mobile Development&quot;</span>);</pre><pre style="margin: 0px;"><span style="color: #2b91af;">MessagingApplication</span>.DisplayComposeForm(sms);</pre></div> <br /><br />The code above depends on 2 assemblies that must be referenced to the project:   <ul><li>Microsoft.WindowsMobile.dll</li><li>Microsoft.WindowsMobile.PocketOutlook.dll</li></ul> <br /><br />It is also possible to P/Invoke the SMS API through sms.dll, but this requires a slightly more complicated solution. In the next section, I will demonstrate how use the SMS API in native code. This should give you an idea on how to use the SMS API if you would like to go try the P/Invoke approach.   <br /><br /><br /><b>Windows Mobile using the Platform SDK (Native code)</b> <br /><br />Probably not very relevant for most modern day managed code developers but just to demonstrate as many ways to send SMS in as many platforms as possible I'd like to show how to send SMS in native code using the Windows CE Short Message Service (SMS) API.  <br /><br />Here's a sample C++ helper class for sending SMS using the Platform SDK  <br /><br /><div style="font-family: Courier New; font-size: 10pt; color: black; background: white;"><pre style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&quot;stdafx.h&quot;</span></pre><pre style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&quot;sms.h&quot;</span></pre><pre style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&lt;string&gt;</span></pre><pre style="margin: 0px;">&nbsp;</pre><pre style="margin: 0px;"><span style="color: blue;">class</span> SmsMessage </pre><pre style="margin: 0px;">{</pre><pre style="margin: 0px;"><span style="color: blue;">private</span>:</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; std::wstring recipient;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; std::wstring message;</pre><pre style="margin: 0px;">&nbsp;</pre><pre style="margin: 0px;"><span style="color: blue;">public</span>:</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; SmsMessage(<span style="color: blue;">const</span> <span style="color: blue;">wchar_t</span>* phoneNumber, <span style="color: blue;">const</span> <span style="color: blue;">wchar_t</span>* text) </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; {</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; recipient = phoneNumber;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; message = text;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; }</pre><pre style="margin: 0px;">&nbsp;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">void</span> Send() </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; {</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SMS_HANDLE smshHandle;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; HRESULT hr = SmsOpen(SMS_MSGTYPE_TEXT, SMS_MODE_SEND, &amp;smshHandle, NULL);</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span> (hr != S_OK)</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span>;</pre><pre style="margin: 0px;">&nbsp;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SMS_ADDRESS smsaDestination;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; memset (&amp;smsaDestination, 0, <span style="color: blue;">sizeof</span> (smsaDestination));</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; smsaDestination.smsatAddressType = SMSAT_INTERNATIONAL;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; lstrcpy(smsaDestination.ptsAddress, recipient.c_str());</pre><pre style="margin: 0px;">&nbsp;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; TEXT_PROVIDER_SPECIFIC_DATA tpsd;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; tpsd.dwMessageOptions = PS_MESSAGE_OPTION_NONE;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; tpsd.psMessageClass = PS_MESSAGE_CLASS1;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; tpsd.psReplaceOption = PSRO_NONE;</pre><pre style="margin: 0px;">&nbsp;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SMS_MESSAGE_ID smsmidMessageID = 0;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; hr = SmsSendMessage(smshHandle, </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NULL, </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &amp;smsaDestination, </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NULL,</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (PBYTE) message.c_str(), </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (message.length() + 1) * <span style="color: blue;">sizeof</span>(<span style="color: blue;">wchar_t</span>), </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (PBYTE) &amp;tpsd, </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue;">sizeof</span>(TEXT_PROVIDER_SPECIFIC_DATA), </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SMSDE_OPTIMAL, </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SMS_OPTION_DELIVERY_NONE, </pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &amp;smsmidMessageID);</pre><pre style="margin: 0px;">&nbsp;</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SmsClose (smshHandle);</pre><pre style="margin: 0px;">&nbsp;&nbsp;&nbsp; }</pre><pre style="margin: 0px;">};</pre></div> <br /><br />The code above requires the that the project is linked with sms.lib, otherwise you won't be able to build.  <br /><br />Here's a snippet of how to use the SMS helper class defined above:  <br /><br /><div style="font-family: Courier New; font-size: 10pt; color: black; background: white;"><pre style="margin: 0px;">SmsMessage *sms = <span style="color: blue;">new</span> SmsMessage(L<span style="color: #a31515;">&quot;+14250010001&quot;</span>, L<span style="color: #a31515;">&quot;Multi-platform Mobile Development&quot;</span>);</pre><pre style="margin: 0px;">sms-&gt;Send();</pre><pre style="margin: 0px;"><span style="color: blue;">delete</span> sms;</pre></div> <br /><br />For those who don't know what +14250010001 is, this is the phone number of the Windows Mobile emulator. For testing SMS functionality on the emulator, you can use this phone number.   <br /><br /><br />That's it for now. I hope you found this article interesting.