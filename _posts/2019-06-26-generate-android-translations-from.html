---
layout: post
title: Generate Android Translations from Google Sheets
date: '2019-06-26T22:30:00.001+02:00'
author: Christian Helle
tags:
- Localization
- Xamarin
- Android
modified_time: '2019-06-26T22:35:34.121+02:00'
thumbnail: https://1.bp.blogspot.com/-Xe0MspUwnQA/XRPOeMGmaMI/AAAAAAAAQWo/xmAfPa_eMgkS--gdCl-7mHkm3VHy3GNiwCLcBGAs/s72-c/sheets-android.png
blogger_id: tag:blogger.com,1999:blog-4995334164049002857.post-1248680433354444596
blogger_orig_url: https://christian-helle.blogspot.com/2019/06/generate-android-translations-from.html
---

In previous articles <a href="/2019/06/generate-resx-translations-using-google.html" target="_blank">Generating ResX translations from Google Sheets</a> and <a href="/2019/06/generate-ios-infopliststrings.html" target="_blank">Generate iOS InfoPlist.strings Translations from Google Sheets</a>, I wrote about using Google Sheets as a translation tool by using the <a href="https://support.google.com/docs/answer/3093331?hl=en" target="_blank">GOOGLETRANSLATE</a>&nbsp;built in function to generate translation files for a <b>Xamarin</b>&nbsp;based solution. For this post, I will demonstrate something very similar, but instead of ResX files or&nbsp;InfoPlist.strings, I'll generate <b>strings.xml</b>&nbsp;files for Android. For the sake of this article I created&nbsp;<a href="https://docs.google.com/spreadsheets/d/1mrMkhItrIDsPwEKMlR8JJ3Pgj1K6zUv0AhmBT4jWRqs/edit#gid=0" target="_blank">this sample Google Sheets</a><br /><br />For a quick recap, we will use a tool called <a href="https://github.com/rickykaare/csvtrans" target="_blank">csvtrans</a>&nbsp;written by my colleague and good friend, <a href="https://twitter.com/rickykaare" target="_blank">Ricky Kaare Engelharth</a>. The tool is built with .NET Core and can be installed using this command<br /><pre><code><br /><b>dotnet tool install -g csvtrans</b><br /></code><br /></pre>Using the tool is also straight forward and it also comes with some quick start instructions<br /><pre><code><br /><b>USAGE: csvtrans [--help] [--sheet &lt;document id&gt; &lt;sheet name&gt;]<br />                [--csv &lt;url or path&gt;] [--format &lt;apple|android|resx&gt;]<br />                [--outputdir &lt;directory path&gt;] [--name &lt;string&gt;]<br />                [--convert-placeholders &lt;regex pattern&gt;]<br /><br />OPTIONS:<br /><br />    --sheet, -s &lt;document id&gt; &lt;sheet name&gt;<br />                          specify a Google Sheet as input.<br />    --csv, -c &lt;url or path&gt;<br />                          specify a online or local cvs file as input.<br />    --format, -f &lt;apple|android|resx&gt;<br />                          specify the output format.<br />    --outputdir, -o &lt;directory path&gt;<br />                          specify the output directory.<br />    --name, -n &lt;string&gt;   specify an optional name for the output.<br />    --convert-placeholders, -p &lt;regex pattern&gt;<br />                          convert placeholders to match the output format.<br />    --help                display this list of options.</b><br /></code></pre><br />Here's an example usage of tool <br /><pre><code><br /><b>csvtrans --sheet 1mrMkhItrIDsPwEKMlR8JJ3Pgj1K6zUv0AhmBT4jWRqs Android --format android --outputdir .\Resources\</b><br /></code><br /></pre>The first argument <code><b>–-sheet</b></code> is the Google Sheet document ID followed by the Sheet Name, the next argument <code><b>–-format</b></code> specifies the output file format, and the last argument <code><b>–-outputdir</b></code> specifies the output folder<br /><br />You can get the Document ID from the URL of the Google Sheet<br /><br /><img src="https://1.bp.blogspot.com/-Xe0MspUwnQA/XRPOeMGmaMI/AAAAAAAAQWo/xmAfPa_eMgkS--gdCl-7mHkm3VHy3GNiwCLcBGAs/s1600/sheets-android.png" /><br /><br />Here's an example output <br /><br /><img src="https://1.bp.blogspot.com/-R2plUxNyEEc/XRPOyDtl3dI/AAAAAAAAQWw/j2mKQQxHxcQFMQbNBMBFbrJAiEl95xhPwCLcBGAs/s1600/csvtrans-android.png" /><br /><br />Now I can just bring these files into my project and use them directly. Well, almost! There's one little problem, and that is that by default the <b>Xamarin.Android</b> csproj tooling explicitly adds each <b>strings.xml</b> file as an <b>AndroidResource</b>. Oddly enough, the csproj format allows to specify wild card folders, so if we want to enable dynamic generation of <b>values/strings.xml</b> translations then we need to manually edit the csproj.  <br /><br />This is actually very easy to do. We just need to replace the lines like <br /><br /><img src="https://1.bp.blogspot.com/-UMIVulovA9E/XRPU4LTIoHI/AAAAAAAAQXE/1DagijFWWB0W0ucKoFKQs56HgCYWvk1qwCPcBGAYYCw/s1600/android-csproj-before.png" /><br /><br />with <br /><br /><img src="https://2.bp.blogspot.com/-hnW2Jmi3djY/XRPVBpE49bI/AAAAAAAAQXI/O1SfdyPheWcsV77m5bw4xDzYg49Q7EX_ACPcBGAYYCw/s1600/android-csproj-after.png" /><br /><br />This opens up for dynamic translations at build time using your CI/CD build tools of choice